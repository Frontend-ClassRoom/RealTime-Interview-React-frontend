(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{89:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=89},99:function(e,n,t){"use strict";t.r(n);var o,c=t(0),r=t.n(c),i=t(46),a=t.n(i),u=t(55),d=t(54),s=t(1),f=t(101),l=t(47),j=t(48),m=t.n(j),v=t(50),b=t(49),O=t.n(b),h=t(3),p=m.a.connect("/"),g=new O.a(void 0,{host:"/",port:"3001"}),x=function(e){var n=e.roomId,t=Object(c.useRef)(null);console.log("front roomId",n,undefined),g.on("open",(function(e){console.log("peer id",e),p.emit("join-room",n,e)})),p.on("user-connected",(function(e){console.log("user connected",e)})),Object(c.useEffect)((function(){fetch("/api/".concat(n,"/"),{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return console.log(e)}))}),[n]),Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(o,e),g.on("call",(function(n){n.answer(e);var t=document.createElement("video");n.on("stream",(function(e){console.log("userStream",e.length),r(t,e)}))})),p.on("user-connected",(function(n){!function(e,n){var t=g.call(e,n),o=document.createElement("video");t.on("stream",(function(e){r(o,e)})),t.on("close",(function(){o.remove()}))}(n,e)}))}))}),[]);var o=document.createElement("video");function r(e,n){var o;e.srcObject=n,e.addEventListener("loadedmetadata",(function(){e.play()})),null===(o=t.current)||void 0===o||o.append(e)}return o.muted=!0,Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(E,{ref:t})})},E=v.a.div(o||(o=Object(l.a)(["\n  video {\n    width: 400px;\n    display: inline-block;\n  }\n"])));var w=function(){var e=Object(c.useState)(),n=Object(u.a)(e,2),t=n[0],o=n[1];return Object(c.useEffect)((function(){o(Object(f.a)())}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.a,{children:Object(h.jsx)(s.a,{path:"*",to:"".concat(t)})}),Object(h.jsx)(x,{roomId:t})]})},F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,102)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),o(e),c(e),r(e),i(e)}))};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(w,{})}),document.getElementById("root")),F()}},[[99,1,2]]]);
//# sourceMappingURL=main.123dd0eb.chunk.js.map